# 视频翻译器 (Video Translator)

一个自动将视频翻译成其他语言的工具，支持字幕和配音。

## 支持的语言

### 源语言
- 中文 (Chinese)
- 英文 (English)

### 目标语言
- 英语 (English)
- 中文 (Chinese)
- 法语 (French)
- 德语 (German)
- 日语 (Japanese)
- 韩语 (Korean)
- 意大利语 (Italian)

## 字幕处理逻辑

字幕显示时长与拆分后的音频时长一致，遵循以下规则：

1. 每条字幕最多显示2行
2. 如果字幕超过2行，则拆分成多条字幕显示
3. 显示时长按照公式计算：
   - 基本时长 = 原始音频时长 / 拆分后的字幕条数
   - 如果最后一条字幕只有1行，显示时间缩短为：基本时长/2 + 1秒

### 示例

如果一条字幕的时间范围是2秒～23秒，一共有5行字幕：
- 拆分为5/2=3条字幕
- 每条字幕的基本显示时长为(23-2)/3 = 7秒
- 最后一条字幕因为只有1行，显示时间缩短为 7/2 + 1 = 4.5秒

## 日志系统

日志文件按小时生成，存储在项目目录下的 `logs` 文件夹中：
- 文件名格式：`video_translator_YYYY-MM-DD_HH.log`
- 例如：`video_translator_2025-04-17_23.log`

## 主要功能

1. 视频转录：识别视频中的语音并转换为文本
2. 文本翻译：将识别出的文本翻译成目标语言
3. 语音合成：将翻译后的文本转换为语音
4. 字幕生成：创建与翻译文本匹配的字幕
5. 视频处理：将翻译后的音频和字幕与原始视频合并

## 技术栈

- AWS Transcribe：语音识别
- AWS Translate/Bedrock：文本翻译
- AWS Polly：语音合成
- FFmpeg：视频处理
- Streamlit：用户界面
